google.load('visualization', '1.0', {'packages':['corechart']});

$(document).ready(function(){

  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      'title': 'Company Performance',
      'width':300,
      'height':175,
      vAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

  $("#map-canvas").on('click', '.info-click',function(event){
    var data = (this.id);
    var url =  '/hospitals/'+data+'/infobox'
    var that = $(this)

    $.get(url, data, function(response){
       console.log(response);
       that.parent().parent().parent().attr('id', 'chart_div');
       that.parent().parent().text(" ");
       // google.load("visualization", "1", {packages:["corechart"]});
       drawChart();
    });
  });



});


// Object {hospital_charge: 32482.92857, il_charge: 32784.11936, natl_charge: 28522.4, hospital_id: 140288} 

